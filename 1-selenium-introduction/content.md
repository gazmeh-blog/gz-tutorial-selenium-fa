## آشنایی کلی با سلنیوم

آزمون مهم‌ترین مرحله در چرخه عمر توسعه نرم‌افزار است. هدف از آزمون نرم‌افزار کاهش ریسک بهره‌برداری و رفع نیازهای مشتری است. بسیاری از پروژه‌های کوچک و متوسط را پس از برنامه‌نویسی می‌توان به‌صورت دستی مورد ارزیابی قرار داد تا مشکلات احتمالی پیدا و برطرف شوند. اما در پروژه‌های بزرگ به دلیل گستردگی نرم‌افزار، آزمون عملکرد آن بسیار زمان بر و خسته‌کننده است. به همین دلیل مبحث آزمون خودکار یا Automated Testing  در اینجا اهمیت پیدا می‌کند.

## آزمون دستی

آزمون دستی یک فرایند تست نرم‌افزار است که در آن موارد آزمون (test case) به‌صورت دستی و بدون استفاده از هیچ ابزار خودکارسازی یا اسکریپت اجرا می‌شوند. تمام موارد آزمون توسط آزمونگر به‌صورت دستی و از دیدگاه کاربر نهایی اجرا می‌شود. هدف این آزمون شناسایی باگ‌ها (bug) یا عیوب (defect) نرم‌افزار و بررسی مطابقت آن با الزامات عملکردی مشخص است.
تست دستی یکی از اساسی‌ترین فرایندهای تست است؛ زیرا می‌تواند عیوب قابل‌مشاهده و پنهان نرم‌افزار را پیدا کند. تفاوت بین خروجی واقعی و خروجی مورد انتظار ارائه شده توسط نرم‌افزار به‌عنوان یک نقص تعریف می‌شود. توسعه‌دهنده نقص‌ها را برطرف کرده و نرم‌افزار را برای آزمایش مجدد به آزمونگر تحویل می‌دهد.
یکی از اصول اساسی تست نرم‌افزار این است که خودکارسازی 100 درصد آزمون امکان‌پذیر نیست، بنابراین تست دستی بخشی ضروری از فرایند تضمین کیفیت نرم‌افزار است.  در واقع تست دستی برای بررسی سریع یا sanity یک محصول استفاده می‌شود و به‌مرور جهت کاهش زمان آزمون رگرسیون، ارزیابی بخش‌های بااهمیت محصول خودکارسازی می‌شود.

## معرفی سلنیوم

سلنیوم یک مجموعه‌آزمون خودکار رایگان و متن‌باز (open-source) است. این ابزار شامل مجموعه‌ای از ابزارها و کتابخانه‌ها (library) برای وب اپلیکیشن‌ها است. سلنیوم تا حدودی شبیه HP QuickTest Pro است، با این تفاوت که سلنیوم بر روی خودکارسازی وب اپلیکیشن‌ها تمرکز دارد. این ابزار بیشتر به دلیل اجراکردن آزمون سریع و قابل‌تکرار وب اپلیکیشن‌ها مشهور است که به توسعه‌دهندگان اجازه می‌دهد نسخه‌های جدید را سریع‌تر و با اطمینان بیشتری منتشر کنند. از سلنیوم برای انجام فرایندهای تکراری یک وب اپلیکیشن مثل چک‌کردن ایمیل‌های روزانه نیز استفاده می‌شود.

## مجموعه ابزار سلنیوم
سلنیوم فقط یک ابزار خودکارسازی نیست؛ بلکه مجموعه‌ای از ابزارها است. هرکدام از این ابزارها با قابلیت‌های خاص خود به نحوی به طراحی و توسعه فرایند خودکارسازی کمک می‌کند. همهٔ این ابزارها را می‌توان به‌صورت جداگانه استفاده یا با یکدیگر تلفیق کرد تا به سطحی از خودکارسازی آزمون دست‌یافت. شکل زیر ابزارهای مختلف مجموعه سلنیوم را نشان می‌دهد:

![Selenium Suite](./resources/selenium-suite.png?raw=true "Selenium Suite")

## کنترل از راه دور سلنیوم
در سال 2004 جیسون هاگینز (Jason Huggins)، مهندسی از شرکت Thoughtworks در حین آزمایش متوجه شد که آزمون دستی ناکارآمد و زمان بر است؛ بنابراین، با استفاده از جاوا اسکریپت برنامه‌ای برای خودکارسازی کارهای تکراری ایجاد کرد. او ابتدا نام این برنامه را JavaScriptTestRunner گذاشت، اما پس از پی‌بردن به پتانسیل این برنامه برای خودکارسازی وب اپلیکیشن‌ها آن را به یک برنامه متن‌باز تبدیل کرد و نام آن را به Selenium Core تغییر داد. 

## سیاست منشأ یکسان
 سیاست منشأ یکسان یک ویژگی امنیتی است که در مرورگرهای وب پیاده‌سازی شده است و محدودیت‌هایی را در برابر درخواست صفحات وب به دامنه یا پورت متفاوت با دامنه اصلی و یا پورت آن اعمال می‌کند. به‌عبارت‌دیگر، اسکریپت‌هایی که در یک صفحه اجرا می‌شوند، نمی‌توانند به اطلاعات یک صفحه دیگر دسترسی پیدا کنند مگر اینکه هر دو صفحه از یک منشأ مشترک استفاده کنند که شامل پروتکل، دامنه و پورت یکسان است. این سیاست به جلوگیری از حملات امنیتی مانند نفوذ از راه دور (XSS) و جعل درخواست (CSRF) کمک می‌کند.
 
![same-origin policy](./resources/same-origin-policy.png?raw=true "same-origin policy")

آزمونگرها به دلیل سیاست منشأ یکسان (که دریافت کد جاوا اسکریپت از دامنه‌ای متفاوت با دامنهٔ سایت اصلی  را محدود می‌کند) برای تست یک اپلیکیشن جهت یکی‌کردن دامنه‌ها، مجبور به نصب محلی Selenium Core  و سرور حاوی آن وب اپلیکیشن بودند. پل هامانت (Paul Hammant) مهندس دیگری از شرکت ThoughtWork با ایجاد Selenium Remote control این مشکل را رفع کرد.
سلنیوم RC اولین ابزاری بود که از چندین زبان برنامه‌نویسی (JAVA ،Ruby ،Perl ،PHP ،Python و #C) و تقریباً از تمام مرورگرهایی که از جاوا اسکریپت پشتیبانی می‌کنند مانند Google Chrome ،Internet Explorer ،Mozilla Firefox و ... پشتیبانی می‌کرد. این ابزار سلنیوم را در بازار معروف کرد. 
این مؤلفه که با نام Selenium1 نیز شناخته می‌شود، مبتنی بر معماری client/server است که سرور در آن نقشی اساسی به‌عنوان یک واسطه بین کد و مرورگر ایفا می‌کند و هرزمان که موارد آزمون یا اسکریپت‌ها نیاز به اجرا داشته باشند، باید سرور را به‌صورت دستی راه‌اندازی کرد (با معرفی Selenium WebDriver  این مشکل رفع شد).

### نحوه کار سلنیوم RC به‌صورت زیر است:
> * **دستورات (API) به سرور ارسال می‌شوند.**
> * **سرور RC یک برنامه مبتنی بر جاوا اسکریپت به نام Selenium Core را به مرورگر منتقل می‌کند.** 
> * **هنگامی که برنامه Selenium Core انتقال یافت، شروع به دریافت دستورالعمل‌ها از سرور RC بر اساس اسکریپت‌های آزمون می‌کند.**
> * **Selenium Core  تمام این دستورات را تفسیر کرده و آنها را به کد جاوا اسکریپت تبدیل می‌کند.**
> * **Selenium Core  کد جاوا اسکریپت را به مرورگر ارسال می‌کند.**
> * **مرورگر تمام دستورات دریافت شده از Selenium Core را اجرا می‌کند و خلاصه‌ای از نتیجه آزمون را به سرور برمی‌گرداند.**

![Selenium RC Architecture](./resources/selenium-rc-architecture.png?raw=true "Selenium RC Architecture")

### مزایا: 
* **اجرای موازی آزمون‌های مختلف امکان‌پذیر است زیرا سلنیوم RC از سلنیوم Grid پشتیبانی می‌کند.**
* **نوشتن آزمون‌های خودکار برای هر وب اپلیکیشن به هر زبان برنامه‌نویسی امکان ادغام بهتر سلنیوم را در چارچوب‌های آزمون واحد موجود فراهم می‌کند.**
* **در کنار سازگاری بین مرورگرها و پلتفرم‌ها، از data-driven نیز پشتیبانی می‌کند.**
* **در صورت ترکیب با IDE ، امکان اجرای سریع‌تر را فراهم می‌کند.**
  
### معایب:
* **قبل از اجرای اسکریپت‌های آزمون، نیاز به نصب و راه‌اندازی یک برنامه جداگانه به نام Selenium Remote Control Server است.**
* **اجرای اسکریپت‌های آزمون زمان بر است؛ زیرا Selenium Core  به‌عنوان واسطه بین مرورگر و دستورات سلنیوم عمل کرده و مرورگر را کنترل می‌کند.**
* **APIهای سلنیوم RC از مفاهیم شی گرایی پیروی نمی‌کنند.**
* **از قابلیت Headless در مرورگرها پشتیبانی نمی‌کند.**


## محیط توسعه سلنیوم یا IDE
شینیا کاساتانی (Shinya Kasatani) از ژاپن با انجام پروژه‌ای در مورد سلنیوم IDE در سال 2006 به ایجاد آن کمک کرد. سلنیوم IDE یک افزونه مرورگر است که از طریق قابلیت ضبط و اجرا جهت خودکارسازی مرورگرها استفاده می‌شود.
این ابزار GUI-based (مبتنی بر رابط کاربری گرافیکی) در ابتدا با نام Selenium Recorder شناخته می‌شد. سلنیوم IDE امکان ضبط، دیباگ (Debug) و ویرایش آزمون‌های عملکردی، گرفتن خروجی از کد به زبان‌های از پیش تعریف شده مختلف و استفاده از یک آزمون درون آزمون دیگری را فراهم می‌کند. ویژگی تکمیل خودکار (auto-completion) بهترین ویژگی آن است؛ زیرا دستورات را سریع وارد کرده که این امر باعث صرفه‌جویی در زمان و مانع از واردکردن دستورات خالی می‌شود. این افزونه برای Google Chrome ،Mozilla Firefox و Microsoft Edge در دسترس است.

![Selenium IDE](./resources/selenium-ide.png?raw=true "Selenium IDE")

### مزایا: 
* **با اجرای مجموعه‌آزمون (test suite) شامل یک یا چند مورد آزمون، انعطاف‌پذیری را در هنگام اجرای موارد آزمون ارائه می‌دهد.** 
* **با تنظیم نقاط توقف (breakpoint) مختلف روی موارد آزمون خاص به پروسه دیباگ کمک می‌کند.** 
* **به‌صورت خودکار موارد آزمون را بر اساس مبادلات آن با مرورگر ثبت می‌کند.**
* **چندین لوکیتور (locator) برای هر عنصر در IDE فراهم می‌کند که می‌توان اجرای موفقیت‌آمیز سناریو را تا حدودی تضمین کرد.**

### معایب:
* **از آزمون داده‌محور (data-driven) پشتیبانی نمی‌کند.**
* **امکان پیاده‌سازی آزمون پایگاه‌داده وجود ندارد.**
* **نمی‌توان گزارش دقیقی از آزمون ارائه داد.**
* **از اسکریپت‌های وب درایور نمی‌توان خروجی گرفت.**



## سلنیوم وب درایور
سایمون استوارت (Simon Stewart) در سال 2007 سلنیوم وب درایور (Selenium 2.0) را ایجاد کرد. سلنیوم وب درایور جانشین سلنیوم RC و مهم‌ترین ابزار سلنیوم است. این ابزار یک رابط کاربری برنامه‌نویسی است که می‌توان از آن برای ایجاد و اجرای موارد آزمون استفاده کرد. وب درایور کمک می‌کند از طریق زبان‌های برنامه‌نویسی، مرورگرها و سیستم‌عامل‌ها آزمون‌ها را انجام دهید. اسکریپت‌های آزمون به‌منظور شناسایی عناصر وب در صفحات وب نوشته شده و سپس اقدامات موردنظر بر روی آن عناصر انجام می‌شود.
وب درایور این امکان را فراهم می‌آورد که کاربران کدها را به زبان انتخابی خود نوشته و با استفاده از درایور مرورگر موردنظر با سیستم تعامل داشته باشند. این ابزار در سطح سیستم‌عامل کارکرده و از پروتکلی به نام JSONWireProtocol برای ارتباط با مرورگرها استفاده می‌کند. 
ازآنجایی‌که وب درایور مستقیماً متدهای مرورگرهای مختلف را فراخوانی می‌کند، برای هر مرورگر درایور جداگانه‌ای وجود دارد.

### مزایا:
* **در مقایسه با سایر ابزارهای سلنیوم سریع‌تر است، زیرا مستقیماً با مرورگر در تعامل است؛ ولی در انواع دیگر مانند RC برای تعامل با مرورگر نیاز به یک سرور RC داریم.**
* **مدیریت عناصر وب پویا مانند alert ها، checkbox ها ممکن است کمی مشکل باشد، اما با استفاده از وب درایور می‌توان راحت‌تر با آن‌ها تعامل داشت.**
* **وب درایور با کمک لوکیتورهای متفاوت، دسترسی و تعامل با عناصر مختلف وب اپلیکیشن را آسان‌تر می‌کند.**
* **استفاده از آن مقرون‌به‌صرفه است؛ زیرا به‌روزرسانی‌های آن به‌راحتی در دسترس است.**
* **از قابلیت Headless در مرورگرها پشتیبانی می‌کند.**



## معماری چارچوب سلنیوم وب درایور 
معماری وب درایور از چهار جزء اصلی تشکیل شده است:
### 1. کتابخانه کلاینت سلنیوم
### 2. پروتکل JSON wire بر روی بستر کلاینت  HTTP
### 3. درایور مرورگرها
### 4. مرورگرها

![Webdriver Architecture](./resources/webdriver-architecture.png?raw=true "Webdriver Architecture")

### کتابخانه کلاینت سلنیوم
سلنیوم این امکان را فراهم می‌کند تا با استفاده از اسکریپت‌های نوشته شده به کمک کتابخانه‌های کلاینت سلنیوم و به هر زبان برنامه‌نویسی، خودکارسازی مرورگرها را انجام دهید. کتابخانه‌های کلاینت به‌عنوان یک مفسر بین اسکریپت آزمون و سلنیوم عمل می‌کنند. به این صورت که اسکریپت آزمون نوشته شده به هر زبان برنامه‌نویسی را از طریق قواعد زبان به Selenese  (زبان استفاده شده برای کدهای سلنیوم) ترجمه می‌کنند. به‌این‌ترتیب، صرف‌نظر از زبانی که برای نوشتن اسکریپت‌های تست سلنیوم استفاده می‌شود، سلنیوم می‌تواند دستورالعمل‌های متفاوت را اجرا کند. 
پرکاربردترین مفسرهای زبان سمت کلاینت که توسط سلنیوم پشتیبانی می‌شوند عبارت‌اند از:
* **Selenium Java**
* **Selenium Ruby**
* **Selenium .NET**
* **Selenium Python**
* **Selenium JavaScript**

### پروتکل JSON wire بر روی بستر کلاینت  HTTP
با استفاده از  سلنیوم وب درایور، می‌توان با همه مرورگرها مانند Google Chrome ،Mozilla Firefox ،Safari ،Microsoft Edge ،Opera و ... تعامل مستقیم برقرار کرده و آنها را خودکارسازی کرد. هر مرورگر شامل یک درایور مرورگر و سرور HTTP مخصوص به آن است.
پروتکل JSON Wire مسئول برقراری ارتباط با درایور مرورگرها از طریق سرور HTTP آن‌ها است. این  پروتکل اطلاعات را از کتابخانه کلاینت سلنیوم دریافت و سپس آن‌ها را به درایور مرورگر مربوطه ارسال می‌کند.

### درایور مرورگر
پس از اینکه پروتکل JSON Wire اطلاعات را به درایور مرورگر ارسال کرد درایور مرورگر، مرورگر موردنظر را کنترل می‌کند تا اسکریپت‌های آزمون سلنیوم را به طور خودکار اجرا کند. پس از آن، درایور پاسخ را به‌صورت پروتکل HTTP و از طریق سرور HTTP ارسال می‌کند. برخی از پرکاربردترین درایورهای وب عبارت‌اند از:
* **Mozilla Firefox Driver (Gecko Driver)**
* **Google Chrome Driver**
* **Internet Explorer Driver**
* **Opera Driver**
* **Safari Driver**
* **HTML Unit Driver (a special headless driver)**


## سلنیوم Grid
 توسط پاتریک لایتبادی (Patrick Lightbody) در سال 2008 جهت کاهش زمان اجرای آزمون‌ها به‌وسیله اجرای هم‌زمان آن‌ها بر روی مرورگرها، ماشین‌ها و سیستم‌عامل‌های مختلف توسعه داده شد. این ابزار این امکان را فراهم می‌کند که آزمون‌ها به‌صورت موازی اجرا شوند، بنابراین در زمان و منابع آزمون بر روی چندین ماشین صرفه‌جویی می‌شود.
سلنیوم Grid یک سرور هوشمند است که دستورات آزمون را به نمونه‌های مرورگر در دستگاه‌های ریموت هدایت می‌کند. 
دو جزء اصلی معماری سلنیوم Grid، هاب (Hub) و نود (Node) است:

هاب: درخواست‌های دسترسی را از وب درایور کلاینت دریافت می‌کند. در ادامه دستورات آزمون که از نوع JSON  است را به درایورهای ریموت در نودها انتقال می‌دهد. سپس دستورات را از کلاینت گرفته و به‌صورت ریموت و موازی روی نود‌های مختلف اجرا می‌کند.

نود: یک دستگاه ریموت است که از یک سیستم‌عامل محلی و یک وب درایور ریموت تشکیل شده است. این جز از سلنیوم Grid، درخواست‌ها را از هاب به‌صورت JSON دریافت کرده و با استفاده از وب درایور آن‌ها را اجرا می‌کند.


آزمونگرها باید در شرایط زیر از سلنیوم Grid استفاده کنند:
* **اجرای آزمون بر روی چندین مرورگر و نسخه‌های آنها، دستگاه‌ها و سیستم‌عامل‌های مختلف** 
* **کاهش زمان تکمیل اجرای یک مجموعه‌آزمون با اجرای موازی آزمون‌ها**

![Selenium Grid Standalone](./resources/selenium-grid-standalone.png?raw=true "Selenium Grid Standalone")

## آزمون های مرسوم در سلنیوم

![Selenium Test Types](./resources/selenium-test-types.png?raw=true "Selenium Test Types")

### Compatibility Testing (آزمون سازگاری):
توسط تیم آزمون جهت اطمینان از اینکه وب اپلیکیشن با معیارهای عملکرد در ترکیب‌های مختلف مرورگر - سیستم‌عامل مطابقت داشته باشد انجام می‌شود. این آزمون تضمین می‌کند که وب اپلیکیشن بر روی سیستم‌هایی با سخت‌افزار متفاوت، مرورگرها و نسخه‌های مختلف آنها و … به‌درستی اجرا می‌شود.  به‌عنوان‌مثال، ریسپانسیو بودن صفحات وب اپلیکیشن با اندازه صفحه نمایشگر.

### Performance Testing (آزمون عملکرد):
مجموعه‌ای از آزمون‌های انجام شده توسط تیم آزمون جهت اطمینان از اینکه پروژه با معیارهای عملکرد تعیین شده توسط کارفرما مطابقت داشته باشد. در واقع در این تست، رفتار سیستم هنگامی که تعداد زیادی کاربر به‌صورت هم‌زمان از آن استفاده می‌کنند، اندازه‌گیری و بررسی می‌شود. سپس می‌توان تصمیم گرفت که آیا سیستم موردنظر می‌تواند بار زیادی از کاربران هم‌زمان را اداره کند یا خیر. 

### Integration Testing (آزمون یکپارچه‌سازی):
این کار توسط توسعه‌دهندگان انجام می‌شود و هدف از آن این است که مطمئن شویم اجزای مختلف سیستم در کنار یکدیگر به‌خوبی کار می‌کنند. همچنین این آزمون تعاملات، ارتباطات و انتقال داده‌ها در بین ماژول‌های مختلف سیستم را بررسی می‌کند که در نهایت کل سیستم می‌بایست عملکرد صحیحی داشته باشد. به‌عنوان‌مثال،  فرایند لاگین در وب‌سایت، شامل ورود به‌حساب کاربری با نام کاربری و رمز عبور، بررسی مجوزهای دسترسی کاربر و قابلیت انجام وظایف مختلف، و تست خروج کاربر از حساب کاربری است. این تست به ما کمک می‌کند تا از صحت و سلامت عملکرد وب‌سایت برای فرایند ورود به‌حساب کاربری اطمینان حاصل کنیم.

### System Testing (آزمون سیستمی):
با نام مستعار آزمون جعبه سیاه (BlackBox) شناخته شده و روشی است که در آن فرض می‌شود اطلاعاتی در مورد جزئیات داخلی و سورس کد وب اپلیکیشن و آزمون‌های انجام‌شدهٔ قبلی وجود ندارد. در این آزمون خروجی به‌ازای ورودی‌های متفاوت بررسی می‌شوند. به‌عنوان‌مثال، فرایند خرید در یک وب‌سایت محصول شامل موارد زیر است: تأیید اعتبار کاربر، دریافت محصولات از سبد خرید، بررسی موجود بودن آنها و تأیید جزئیات پرداخت (قبل از هدایت مجدد به وب‌سایت بانک). آزمونگر می‌تواند یک اسکریپت برای تأییدیه درست بودن کل سیستم بنویسد.

### End-to-end Testing (آزمون ارتباط کاربر با نرم‌افزار):
در این روش سیستم با شبیه‌سازی یک سناریوی واقعی از حرکات کاربر نهایی تحت آزمون قرار گرفته و درستی عملکرد آن بررسی می‌شود. در مورد مثال قبلی، آزمونگر می‌تواند مجموعه‌ای از موارد آزمون نوشته و بررسی کند که ثبت‌نام، جستجوی محصول، پرداخت، بازنگری، نشانک‌گذاری و همه ویژگی‌های دیگر همان‌طور که در نظر گرفته شده عمل می‌کنند (و زمانی که مقادیر نامعتبر در فیلدهای ورودی وارد می‌شوند، آزمون‌ها ناموفق خواهند بود).

###  Regression Testing (آزمون رگرسیون):
این آزمون بررسی می‌کند که تغییرات ایجاد شده در یک قسمت از سیستم تأثیری روی کارکرد قسمت‌های دیگر نداشته باشد. در ادامهٔ مثال قبل، فرض کنید که یک ویژگی جدید مانند کد تخفیف به وب‌سایت فروش محصول اضافه شده است، بدین صورت که به طور خودکار برای کاربران واجد شرایط قبل از پرداخت اعمال می‌شود. آزمونگر می‌تواند موارد آزمونی بنویسد تا تأیید کند که این ویژگی تأثیر منفی بر روی کارکرد بقیه سیستم ندارد.


## مزایای کلی استفاده از سلنیوم
* **سلنیوم یک ابزار آزمون خودکارسازی متن‌باز و رایگان است.**
* **سلنیوم انعطاف‌پذیری بالایی دارد و امکان نوشتن موارد آزمون پیشرفته و پیچیده را فراهم می‌کند.** 
* **از چندین سیستم‌عامل مانند Windows ،Mac ،Android ،iOS و ... پشتیبانی می‌کند.**
* **با طیف وسیعی از زبان‌های برنامه‌نویسی از جمله Python، Java، Perl، PHP، Ruby و ... سازگاری دارد.**
* **از مرورگرهای مختلف مانند Google Chrome ،Mozilla Firefox ،Opera ،Safari و Internet Explorer پشتیبانی می‌کند.**
* **موارد آزمون را می‌توان در حالتی که پنجره مرورگر minimize شده (HeadLess) اجرا کرد.**
* **از اجرای موازی آزمون‌ها پشتیبانی می‌کند.**
* **سلنیوم را می‌توان با TestNG و JUnit برای تولید گزارش‌های آزمون و مدیریت موارد آزمون ادغام کرد.**
* **از منابع سخت‌افزاری کمی استفاده می‌کند.**
* **سلنیوم را می‌توان با Jenkins ،Docker و Maven ادغام کرد تا به continuous testing (آزمون مداوم) رسید.**
* **آزمون‌های سلنیوم قابلیت استفاده مجدد دارند.**

## معایب کلی استفاده از سلنیوم
* **با استفاده از سلنیوم نمی‌توان برنامه‌های موبایل را تست کرد (با کمک Appium می‌توان این کار را انجام داد).**
* **سلنیوم نمی‌تواند به عناصر وب خارج از برنامه‌های تحت آزمون دسترسی پیدا کند.**
* **آزمونگرها برای نوشتن موارد آزمون به زمان بیشتری نیاز دارند.**
* **هیچ ابزاری جهت مدیریت آزمون ارائه نمی‌دهد.**
* **سلنیوم به‌تنهایی قابلیت تولید گزارش از نتیجه تست را نداشته و باید با TestNG/JUnit ادغام شود.**
* **سلنیوم به طور مستقل از آزمون تصاویر پشتیبانی نمی‌کند. برای آزمون تصاویر باید با Sikuli ادغام شود.**
* **نمی‌تواند المنت‌های پویا را مدیریت کند.**
* **آماده‌سازی محیط آزمون در سلنیوم در مقایسه با ابزارهایی مانند UFT ،RFT ،SilkTest و ... دشوارتر است.**
* **استفاده از سلنیوم نیاز به دانش برنامه‌نویسی دارد.**


## مقایسه سلنیوم و QTP (UFT)
QTP مخفف Quick Test Professional است که ابتدا توسط Mercury Interactive توسعه داده شد. بعد از مدتی توسط  HP خریداری شد و آنها آن را UFT (Unified Functional Testing) نامیدند. UFT با QTP و HP Service Test در یک بسته نرم‌افزاری واحد ترکیب شد که ظاهراً تا سال 2016 در دسترس بود تا اینکه کل بخش به Microfocus فروخته شد.
QTP که اکنون UFT نامیده می‌شود، ابزاری است که برای خودکارسازی آزمون‌های عملکردی به‌صورت یکپارچه بدون نظارت بر سیستم طراحی شده است. این ابزار در درجه اول برای آزمون عملکرد، رگرسیون و سرویس استفاده می‌شود. با استفاده از UFT، آزمونگر‌ها می‌توانند اقدامات کاربر را در یک برنامه کامپیوتری مبتنی بر وب یا کلاینت خودکار کرده و اشکالاتی را که ممکن است هنگام انجام آن اقدامات ظاهر شوند را بررسی و شناسایی کنند.

### مزایا:
* **خودکارسازی با استفاده از QTP، اگر به‌درستی برنامه‌ریزی و اجرا شود، می‌تواند مقدار قابل‌توجهی در زمان و هزینه صرفه‌جویی کند.**
* **QTP برای آزمون نرم‌افزارهای مختلف و محیط آنها طراحی شده است.**
* **این ابزار اجرای موارد آزمونی مبتنی بر UI و غیر UI مانند عملیات مربوط به فایل، آزمون پایگاه‌داده، برنامه‌های دسکتاپ و... را خودکارسازی می‌کند.**
* **QTP روی پلتفرم ویندوز و در چندین مرورگر مانند کروم، فایرفاکس و ... کار می‌کند.**
* **QTP به اجرای بررسی‌های تضمین کیفیت در نرم‌افزارهای تحت آزمون کمک می‌کند.**
* **این ابزار validation نتایج و تولید گزارش را ارائه می‌دهد.**


### مزایای سلنیوم نسبت به QTP:
| **ویژگی**                      | **Selenium**                                                                                                       | **QTP/UFT**                                                                                                                                               |
|------------------------------------------:|-------------------------------------------------------------------------------------------------------------------:|------------------------------------------------------------------------------------------------------------------------------------------:|
| نوع نرم‌افزار                             | مجموعه‌ای از APIها                                                                                                 | برنامه دسکتاپ                                                                                                                             |
| مرورگرهای پشتیبانی شده                    | در تمام مرورگرها اجرا می‌شود.                                                                                       | فقط می‌تواند آزمون‌ها را در نسخه‌های خاصی از Google Chrome ،Mozilla Firefox و Internet Explorer انجام دهد.                               |
| License (مجوز)                            | Open-source و رایگان                                                                                               | دارای license  و تجاری                                                                                                                    |
| محیط                                      | بسیار تعمیم‌پذیر و پشتیبانی از همه extensionها                                                                     | از SAP و Oracle  پشتیبانی می‌کند و هیچ add-ons ی برای آن وجود ندارد.                                                                       |
| اجرای آزمون                               | می‌تواند آزمون‌ها را به‌صورت موازی با ادغام فریم‌ورک‌های آزمون مانند TestNG اجرا کند.                              | برای اجرای موازی آزمون‌ها باید با Micro Focus ALM که یک فریم‌ورک غیررایگان است ترکیب شود.                                                 |
| مصرف منابع در حین اجرای اسکریپت‌های آزمون | به منابع سیستم کمتری نیاز دارد و می‌تواند در Windows  یا Linux VM  استفاده شود. Linux VM سبک‌تر از Windows VM است. | به منابع سیستم بیشتری نیاز دارد. فقط می‌تواند بر روی Windows VM اجرا شود که از منابع بیشتری استفاده می‌کند و نیاز به نگهداری بیشتری دارد. |
| زبان برنامه‌نویسی                         | از زبان‌های شیءگرا مانند java و دیگر زبان‌ها مانند C#, Ruby, Python, Perl, PHP و JavaScript پشتیبانی می‌کند.         | فقط از VBScript پشتیبانی می‌کند؛ بنابراین، رویکرد شی گرا برای خودکارسازی با QTP/UFT چالش‌برانگیز می‌شود.                                  |
| محیط‌های پشتیبانی شده                     | Android, iOS, Windows, Linux, Mac, Solaris                                                                        | فقط Windows                                                                                                                               |
           

### مزایای QTP نسبت به سلنیوم:
| **ویژگی**                      | **Selenium**                                                                                                       | **QTP/UFT**                                                                                                                                               |
|-------------------------------:|-------------------------------------------------------------------------------------------------------------------:|----------------------------------------------------------------------------------------------------------------------------------------------------------:|
| Object Repository              | چنین repositoryی ندارد.                                                                                            | Repository  داخلی دارد.                                                                                                                                   |
| پشتیبانی از اپلیکیشن           | خودکارسازی آزمون نرم‌افزارهای موبایلی را پشتیبانی نکرده و فقط می‌تواند اپلیکیشن‌های وب را مورد آزمون قرار دهد.     | از خودکارسازی آزمون برنامه‌های وب و همچنین به‌واسطه راهکار HP که HP Mobile Center نامیده می‌شود، از خودکارسازی آزمون برنامه‌های موبایل پشتیبانی می‌کند.   |
| سرعت خودکارسازی                | به دلیل اینکه فاقد یک IDE محلی است و فقط IDE ثالث می‌تواند برای توسعه استفاده شود، سرعت خودکارسازی پایین‌تری دارد. | به دلیل اینکه یک IDE با امکانات کامل است، خودکارسازی را سریع‌تر از سلنیوم انجام می‌دهد.                                                                |
| پشتیبانی از تکنولوژی           | در حین خودکارسازی برنامه‌های SAP، Salesforce، Mainframe  با مشکل مواجه می‌شود.                                     | تقریباً از هر برنامه و محیط نرم‌افزاری از جمله SAP ،Oracle  ، mainframe ها، فریم‌ورک‌های تعبیه شده، مرورگرهای headless  و ... پشتیبانی می‌کند. |
| کنترل مرورگر                   | فقط ناحیه قابل‌مشاهده مرورگر که در آن صفحه بارگذاری می‌شود را کنترل می‌کند.                                        | کنترل‌هایی مانند favourite bar،  دکمه‌های عقب و جلو در مرورگر قابل‌دسترسی هستند.                                                                          |
| گارانتی                        | هیچ پشتیبانی رسمی برای کاربران ارائه نشده است.                                                                     | ارائه پشتیبانی حرفه‌ای به مشتریان                                                                                                                         |
| تولید گزارش آزمون              | برای تولید گزارش‌های آزمون وابسته به ابزار خارجی است.                                                              | تولید گزارش آزمون داخلی درون ابزار                                                                                                                        |
| (Parameterization) پارامترسازی | برای پارامترسازی باید یکی از زبان‌های برنامه‌نویسی پشتیبانی شده را استفاده کنید.                                   | ارائه ابزارهایی داخلی برای پارامترسازی                                                                                                                    |
                                                                                                                                           

در نهایت، این یک بررسی کلی از تفاوت بین ابزارهای خودکارسازی آزمون سلنیوم و QTP است. اگرچه QTP دارای قابلیت‌های بیشتری است، اما سلنیوم در هزینه، انعطاف‌پذیری و آزمون موازی غالب بوده و اگر از آن به‌عنوان یک ابزار خودکارسازی آزمون عملکرد استفاده کنیم، می‌توانیم هزینه مورداستفاده برای مجوز QTP را حذف کنیم. 
